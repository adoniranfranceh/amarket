<%= javascript_pack_tag 'admin_template/sales.js', 'data-turbolinks-track': 'reload' %>
<%= simple_form_for [:admin_template, @sale], remote: false, authenticity_token: true do |form| %>
  <div class="<%= fieldset_disabled %>">
    <div class="mb-3">
      <%= form.input :customer_id, as: :select, collection: @customers, label: 'Selecione o cliente', include_blank: true, input_html: { class: 'form-control select2 required-field', id: 'sale_customer_id' } %>
      <div class="error-message"></div>
    </div>
    <div class="mb-3">
      <div class="mb-3">
        <%= render 'modal_sale' %>
      </div>

      <div class="mb-3">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
          Adicionar Produto
        </button>
        <div class="error-message"></div>
        <%= form.hidden_field :secondaryproduct_ids, id: 'product-id-list', class: 'required-field' %>
        <%= render partial: 'products_select' %>
      </div>

    <div class="mb-3 row div-center">
       <div class="input-group mr-5">
          <span class="input-group-text"><i class="bi bi-percent"></i></span>
        <%= form.number_field :discount, class: 'form-control input-number', step: 0.01, id: 'discount-input', placeholder: 'Desconto'%>
      </div>

      <div class="input-group mr-5">
          <span class="input-group-text"><i class="bi bi-currency-dollar"></i></span>
        <%= form.number_field :total_price, class: 'form-control input-number', step: 0.01, id: 'total-price-input'%>
        <div class="error-message"></div>
      </div>
       <div class="input-group mr-5">
          <span class="input-group-text"><i class="bi bi-bag-fill"></i></span>
          <%= form.number_field :quantity, class: 'form-control input-number', step: 0.01, id: 'total-quantity-input'%>
          <div class="error-message"></div>
      </div>
    </div>
    <div class="mb-3">
      <%= form.collection_select :payment_method, available_payment_methods, :itself, :itself, { include_blank: 'Selecione um mÃ©todo de pagamento' }, { class: 'form-control' } %>
    </div>
    <div class="mb-3">
      <%= form.collection_select :status, Sale::STATUS_OPTIONS.values, :to_s, ->(status) { status.to_s.humanize }, { include_blank: 'Selecione um status' }, class: 'form-control' %>
    </div>
    <div class="mb-3">
      <%= form.text_area :comments, class: 'form-control', rows: 3 %>
    </div>
    <div>
      <%= form.button :submit, 'Salvar', id: 'submit-button', class: 'btn btn-primary' %>
    </div>
  </div>
<% end %>
