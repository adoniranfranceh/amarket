<div class="float-end"><%= link_to 'Adicionar novo', new_admin_template_product_path, class: 'btn btn-success' %></div>
<div>
<div class="float-end"><%= link_to 'Variações dos produtos', admin_template_secondary_products_path, class: 'btn btn-primary' %>
</div>
<div>
  <table class="table table-bordered dataTable dtr-inline">
    <thead>
      <tr>
        <th class="col-1">Id</th>
        <th class="col-3">Nome</th>
        <th class="col-3">Image</th>
        <th class="col-1">Preço</th>
        <th class="col-1">Estoque</th>
        <th class="col-2">Ações</th>
      </tr>
    </thead>
    <tbody>
      <% @products.each do |product| %>   
      <tr>
        <td style="padding-bottom: 37px;"><%= product.id %></td>
        <td><%= product.full_name %></td>
        <td  class="rounded float-end"><%= link_to(image(product), '#', "data-toggle":"modal", "data-target":"#exampleModal")%></td>
        <td class="">
          R$ <%= number_with_precision(product.sale_price, precision: 2, separator: ',', delimiter: '.') %>
        </td>
        <td class="number">
          <%= product.quantity %>
        </td>
        <td>
          <%= link_to admin_template_product_path(product), class: "btn btn-success" do %>
            <i class="bi bi-eye-fill"></i>
          <% end %>
          <%= link_to edit_admin_template_product_path(product), data: { turbolinks: false }, class: "btn btn-primary" do %>
            <i class="bi bi-pencil-square"></i>
          <% end %>
          <% if product.variations.present? %>
            <button class="btn btn-warning" data-toggle="modal" data-target=".bd-example-modal-xl<%= product.id %>">
              <i class="bi bi-diagram-3-fill"></i>
            </button>
            <%= render partial: 'admin_template/shared/modal_product', locals: {product: product} %>
          <% end %>
        </td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>

<%= render partial: 'admin_template/shared/image_modal' %>
